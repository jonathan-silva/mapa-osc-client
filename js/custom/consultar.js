"use strict";require(["jquery-ui","libs/jquery-mask/jquery.mask.min"],function(e){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(e,a){$(this).css(e),$("<div>").addClass("arrow").addClass(a.vertical).addClass(a.horizontal).appendTo(this)}}}),$(".scroll").click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:$(this.hash).offset().top},800)})}),require(["react"],function(e){require(["jquery-ui","rotas","jquery","select-boxit"],function(e){var i,n=new Rotas;function t(e,o){var a=$("select#"+o).data("selectBox-selectBoxIt");null!=a&&a.destroy(),$.ajax({url:n.MetaProjeto(e),type:"GET",async:!0,dataType:"json",error:function(e){console.log("Erro no ajax: "),console.log(e)},success:function(e){var a=$("#"+o),t='<option value="">Selecione uma opção</option>';null!=e&&$.each(e,function(e,a){t+="<option value="+a.cd_meta_projeto+">"+a.tx_nome_meta_projeto+"</option>"}),a.html(t),$("#"+o).addClass("newSelectBox"),$("#"+o).selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1}),$("#"+o).selectBoxIt(),$("select#"+o).data("selectBox-selectBoxIt").enable(),verificarContraste()}})}function o(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[ÀÁÂÃÄÅ]/g,"A")).replace(/[àáâãäå]/g,"a")).replace(/[ÉÈÊË]/g,"E")).replace(/[éèêë]/g,"e")).replace(/[ÍÌÎÏ]/g,"I")).replace(/[íìîï]/g,"i")).replace(/[ÓÒÔÕ]/g,"O")).replace(/[óòôõ]/g,"o")).replace(/[ÚÙÛÜ]/g,"U")).replace(/[úùûü]/g,"u")).replace(/[Ç]/g,"C")).replace(/[ç]/g,"c")}$("#accordion .panel-heading").each(function(){$(this).click(function(){$(this).parent().parent().children().last().toggle("slow")})}),$(function(){$("#dt_data_inicio_conselho").datepicker({defaultDate:"+1w",changeYear:!0,changeMonth:!0,numberOfMonths:1,onClose:function(e){$("#dt_data_fim_conselho").datepicker("option","minDate",e)}}),$("#dt_data_fim_conselho").datepicker({defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(e){$("#dt_data_inicio_conselho").datepicker("option","maxDate",e)}}),$("#dt_data_inicio_projeto").datepicker({defaultDate:"+1w",changeYear:!0,changeMonth:!0,numberOfMonths:1,onClose:function(e){$("#dt_data_fim_projeto").datepicker("option","minDate",e)}}),$("#dt_data_fim_projeto").datepicker({defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(e){$("#dt_data_inicio_projeto").datepicker("option","maxDate",e)}})}),$(function(){$("div[id^='slider-range-']").each(function(){$(this).parent().find("input");var e=$(this).parent().find("label").attr("for");if("valor_dinheiro"==e)$(this).slider({range:!0,animate:!0,min:0,max:1e6,step:100,values:[0,1e6],slide:function(e,a){$(e.target.previousElementSibling).find(".min").val(a.values[0].toLocaleString("pt-BR",{minimumFractionDigits:2})),$(e.target.previousElementSibling).find(".max").val(a.values[1].toLocaleString("pt-BR",{minimumFractionDigits:2}))}});else if("ano"==e){var a=(new Date).getFullYear();$(this).slider({range:!0,min:1900,max:a,values:[1900,a],slide:function(e,a){$(e.target.previousElementSibling).find(".min").val(a.values[0]),$(e.target.previousElementSibling).find(".max").val(a.values[1])}})}else $(this).slider({range:!0,min:0,max:1e3,values:[0,1e3],slide:function(e,a){$(e.target.previousElementSibling).find(".min").val(a.values[0]),$(e.target.previousElementSibling).find(".max").val(a.values[1])}})})}),$.ajax({url:n.Busca_Certificado(),type:"GET",dataType:"json",error:function(e){console.log("ERRO no AJAX :"+e)},success:function(e){var a={1:"titulacao_entidadeAmbientalista",2:"titulacao_cebasEducacao",3:"titulacao_cebasSaude",4:"titulacao_oscip",5:"titulacao_utilidadePublicaFederal",6:"titulacao_cebasAssistenciaSocial",7:"titulacao_utilidadePublicaEstadual",8:"titulacao_utilidadePublicaMunicipal",9:"titulacao_naoPossui"};if(0<e.length)for(var t in e){var o='<label><input id="'+a[e[t].cd_certificado]+'" value="'+e[t].cd_certificado+'"  type="checkbox">'+e[t].tx_nome_certificado+"</label>";$("#cd_certificado").append(o)}}}),$.ajax({url:n.AreaAtuacao(),type:"GET",async:!0,dataType:"json",error:function(e){console.log("Erro no ajax: ")},success:function(e){if(null!=e)for(var a in e){var t='<label><input id="cd_area_atuacao-'+e[a].cd_area_atuacao+'" value="'+e[a].cd_area_atuacao+'"  type="checkbox">'+e[a].tx_nome_area_atuacao+"</label>";$("#cd_area_atuacao").append(t)}$.ajax({url:n.SubAreaAtuacao(),type:"GET",async:!0,dataType:"json",error:function(e){console.log("Erro no ajax: ")},success:function(e){i=e,$("#cd_area_atuacao input").change(function(){var t=$(this).val(),e=$(this).parent().text();if("Outros"!=e)if(this.checked){if(null!=i){var a=$("#cd_subarea_atuacao"),o="";o+='<div class="form-group col-xs-6 col-sm-12 buscaSubareaAtuacao" id="item_'+t+'" ><label class="control-label itemAreaAtuacao">'+e+":</label>",$.each(i,function(e,a){t==a.cd_area_atuacao&&(o+='<label><input id="cd_subarea_atuacao-'+a.cd_subarea_atuacao+'" value="'+a.cd_subarea_atuacao+'" type="checkbox">'+a.tx_nome_subarea_atuacao+"</label>")}),o+="</div>",$(".subareaAtuacao").css("visibility","visible"),a.append(o)}}else $("#item_"+t).remove()})}})}}),$("#cd_situacao_imovel_osc").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.SituacaoImovel(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_situacao_imovel,value:e[o].cd_situacao_imovel});a.resolve(t)}),a}}),$("#espacosParticipacaoSocial").mousedown(function(){$("#cd_tipo_participacao").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.Titularidade(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_tipo_participacao,value:e[o].cd_tipo_participacao});a.resolve(t)}),a}}),$("#cd_conselho").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.Conselho(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_conselho,value:e[o].cd_conselho});a.resolve(t)}),a}}),$("#cd_forma_participacao_conferencia").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.FormaParticipacaoConferencia(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_forma_participacao_conferencia,value:e[o].cd_forma_participacao_conferencia});a.resolve(t)}),a}}),$("#cd_conferencia").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.Conferencia(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_conferencia,value:e[o].cd_conferencia});a.resolve(t)}),a}})}),$("#projetos").mousedown(function(){$("#cd_origem_fonte_recursos_projeto").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.FontesRecursosProjeto(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_origem_fonte_recursos_projeto,value:e[o].cd_origem_fonte_recursos_projeto});a.resolve(t)}),a}}),$("#cd_status_projeto").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.SituacaoProjeto(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_status_projeto,value:e[o].cd_status_projeto});a.resolve(t)}),a}}),$("#cd_zona_atuacao_projeto").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.ZonaAtuacaoProjeto(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_zona_atuacao,value:e[o].cd_zona_atuacao_projeto});a.resolve(t)}),a}}),$("#cd_abrangencia_projeto").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.AbrangenciaProjeto(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_abrangencia_projeto,value:e[o].cd_abrangencia_projeto});a.resolve(t)}),a}})}),$("#cd_objetivo_projeto").mousedown(function(){$("#cd_objetivo_projeto").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.Objetivos(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_objetivo_projeto,value:e[o].cd_objetivo_projeto});a.resolve(t)}),a}})}),$("#cd_objetivo_projeto").change(function(){var e=$(this).val();if(""!=e)t(e,"cd_meta_projeto");else{$("#cd_meta_projeto").html('<option value="">Selecione uma opção</option>');var a=$("select#cd_meta_projeto").data("selectBox-selectBoxIt");null!=a&&a.disable(),verificarContraste()}}),$("#cd_objetivo_osc").selectBoxIt({theme:"default",defaultText:"Selecione uma opção",autoWidth:!1,populate:function(){var a=$.Deferred(),t=[],o=-1;return $.ajax({url:n.Objetivos(),type:"GET",async:!0,dataType:"json"}).done(function(e){for(;++o<e.length;)t.push({text:e[o].tx_nome_objetivo_projeto,value:e[o].cd_objetivo_projeto});a.resolve(t)}),a}}),$("#cd_objetivo_osc").change(function(){var e=$(this).val();if(""!=e)t(e,"cd_meta_osc");else{$("#cd_meta_osc").html('<option value="">Selecione uma opção</option>');var a=$("select#cd_meta_osc").data("selectBox-selectBoxIt");null!=a&&a.disable(),verificarContraste()}}),$("#tx_nome_municipio").autocomplete({minLength:1,source:function(e,a){$.ajax({url:n.AutocompleteOSCByCounty(o(e.term).replace(/ /g,"+"),25),type:"GET",async:!0,dataType:"json",success:function(e){a($.map(e,function(e){return{label:e.edmu_nm_municipio+" - "+e.eduf_sg_uf,value:e.edmu_nm_municipio+" - "+e.eduf_sg_uf,id:e.edmu_cd_municipio}}))},error:function(e){a([])}})},select:function(e,a){$("#tx_nome_municipio").val(a.item.value),$("#cd_municipio").val(a.item.id)}}),$("#tx_nome_uf").autocomplete({minLength:1,source:function(e,a){$.ajax({url:n.AutocompleteOSCByState(o(e.term).replace(/ /g,"+"),10),type:"GET",async:!0,dataType:"json",success:function(e){a($.map(e,function(e){return{label:e.eduf_nm_uf,value:e.eduf_nm_uf,id:e.eduf_cd_uf}}))},error:function(){a([])}})},select:function(e,a){$("#tx_nome_uf").val(a.item.value),$("#cd_uf").val(a.item.id)}}),$("#tx_nome_regiao").autocomplete({minLength:1,source:function(e,a){$.ajax({url:n.AutocompleteOSCByRegion(o(e.term).replace(/ /g,"+"),10),type:"GET",async:!0,dataType:"json",success:function(e){a($.map(e,function(e){return{label:e.edre_nm_regiao,value:e.edre_nm_regiao,id:e.edre_cd_regiao}}))},error:function(){a([])}})},select:function(e,a){$("#tx_nome_regiao").val(a.item.value),$("#cd_regiao").val(a.item.id)}}),$("#tx_atividade_economica").autocomplete({minLength:1,source:function(e,a){$.ajax({url:n.AutocompleteAtividadeEconomica(o(e.term).replace(/ /g,"_"),10),type:"GET",async:!0,dataType:"json",success:function(e){0<e.length?a($.map(e,function(e){return{value:e.tx_atividade_economica,cod:e.cd_classe_atividade_economica}})):($("#tx_atividade_economica").val(""),$("#tx_atividade_economica").closest(".form-group").removeClass("has-success").addClass("has-error"),$("#labelError_atividade_economica").text("Nome da Atividade Econômica inválido."),setTimeout(function(){$("#tx_atividade_economica.form-control").closest(".form-group").removeClass("has-error"),$("#labelError_atividade_economica").text("")},2e3))},error:function(e){$("#tx_atividade_economica").val(""),$("#tx_atividade_economica").closest(".form-group").removeClass("has-success").addClass("has-error"),$("#labelError_atividade_economica").text("Nome da Atividade Econômica inválido."),setTimeout(function(){$("#tx_atividade_economica.form-control").closest(".form-group").removeClass("has-error"),$("#labelError_atividade_economica").text("")},2e3)}})},select:function(e,a){$("#tx_atividade_economica").val(a.item.value),$("#cd_classe_atividade_economica").val(a.item.cod),$("#tx_atividade_economica.form-control").closest(".form-group").removeClass("has-error"),$("#labelError_atividade_economica").text("")}});var a={1:"IDH_Municipal"};for(var c in a){var r='<label for="'+a[c]+'"><input id="'+a[c]+'" type="checkbox" name="idh" value="'+a[c]+'">'+a[c].replace("_"," ")+"</label><br><br>";$("#IDHM").append(r)}$("#IDHM input").change(function(){if(this.checked){var e=$("#IDHM");"<label><b>Faixas de IDHM</b>:&nbsp;&nbsp;</label><br>",'<label><input id="baixo" value="baixo" type="checkbox">Baixo (abaixo de 0,600)&nbsp;&nbsp;</label>','<label><input id="medio" value="medio" type="checkbox">Médio (entre 0,600 e 0,699)&nbsp;&nbsp;</label>','<label><input id="alto" value="alto" type="checkbox">Alto (0,700 ou mais)</label>',"</div>",$(".faixa_IDHM").css("visibility","visible"),e.append('<div id="faixa_IDHM"><label><b>Faixas de IDHM</b>:&nbsp;&nbsp;</label><br><label><input id="baixo" value="baixo" type="checkbox">Baixo (abaixo de 0,600)&nbsp;&nbsp;</label><label><input id="medio" value="medio" type="checkbox">Médio (entre 0,600 e 0,699)&nbsp;&nbsp;</label><label><input id="alto" value="alto" type="checkbox">Alto (0,700 ou mais)</label></div>')}else $("#faixa_IDHM").remove()}),$.ajax({url:n.Ipeadata(),type:"GET",async:!0,dataType:"json",error:function(e){console.log("Erro no ajax: ")},success:function(e){if(null!=e)for(var a in e){var t='<label><input id="cd_indice-'+e[a].cd_indice+'" value="'+e[a].cd_indice+'"  type="checkbox">'+e[a].tx_nome_indice+"</label>";$("#IDH_Adicionais").append(t)}}}),$(".min, .max").keypress(function(){var e=window.event,a=e.keyCode;47<a&&a<58||e.preventDefault()}),$(".min").change(function(){$(this).parent().parent().find("div[id^='slider-range-']").slider("values",0,$(this).val().replace(/[.]/g,"").split(",")[0])}),$(".max").change(function(){$(this).parent().parent().find("div[id^='slider-range-']").slider("values",1,$(this).val().replace(/[.]/g,"").split(",")[0])}),$("label[for='valor_dinheiro']").parent().find(".min, .max").mask("000.000.000.000.000,00",{reverse:!0}),$("#btnLimpar").on("click",function(){$(".consultaAvancada input[type=text]").each(function(){$(this).val("")}),$("input[type=checkbox]").each(function(){$(this).attr("checked",!1),$(this).prop("checked",!1)}),$(".consultaAvancada select").each(function(){$(this).hasClass("newSelectBox")?null!=$(this).data("selectBox-selectBoxIt")&&$(this).data("selectBox-selectBoxIt").selectOption(""):$(this).prop("selectedIndex",0)}),$("div[id^='slider-range-']").each(function(){$(this).slider("values",0,""),$(this).slider("values",1,99999999999)}),$(".buscaSubareaAtuacao").each(function(){$(this).remove()})}),$("#btnConsultar").on("click",function(){var t={};$(".panel-default").each(function(){var a=$(this).find(".panel-title").attr("id");$(this).find("input[type=text], select").each(function(){""!=$(this).val()&&("areasSubareasAtuacao"===a&&(a="atividadeEconomica"),void 0===t[a]&&(t[a]={}),"cd_identificador_osc"==$(this).attr("id")?t[a][$(this).attr("id")]=$(this).val().replace(/\D/g,""):t[a][$(this).attr("id")]=$(this).val())}),$(this).find("input[type=hidden]").each(function(){""!=$(this).val()&&("areasSubareasAtuacao"===a&&(a="atividadeEconomica"),void 0===t[a]&&(t[a]={}),t[a][$(this).attr("id")]=$(this).val())}),$(this).find("input[type=checkbox]").each(function(){if($(this).prop("checked"))if("atividadeEconomica"==a||"areasSubareasAtuacao"==a)if(a="areasSubareasAtuacao","cd_subarea_atuacao"==$(this).parent().parent().parent().attr("id"))void 0===t[a]&&(t[a]={}),t[a][$(this).attr("id")]=$(this).prop("checked");else{var e=$(this).val();0==$("#item_"+e).find("input[type=checkbox]:checked").length&&(void 0===t[a]&&(t[a]={}),t[a][$(this).attr("id")]=$(this).prop("checked"))}else void 0===t[a]&&(t[a]={}),t[a][$(this).attr("id")]=$(this).prop("checked")})});window.localStorage.setItem("params_busca_avancada",JSON.stringify(t)),location.href="./resultado-consulta.html?avancado="})})});