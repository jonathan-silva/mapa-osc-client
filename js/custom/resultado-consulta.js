"use strict";function getParameter(a,e){e||(e=location.href),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+a+"=([^&#]*)").exec(e);return null==o?null:o[1]}var urlRota,type_http;require(["jquery-ui"],function(a){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,e){$(this).css(a),$("<div>").addClass("arrow").addClass(e.vertical).addClass(e.horizontal).appendTo(this)}}})}),require(["rotas","jquery-ui","datatables-responsive","leafletCluster","simplePagination","util"],function(a){new Util;var t,i,e,n={},s={},c={},d={},l={},u=L.layerGroup(),m=L.layerGroup(),p=L.layerGroup(),b=!1,r=!0,_=!1,o=!1,g="",f="",M={},v="",A={center:new L.LatLng(-16.55555555,-60.55555555),zoom:4,minZoom:4},h=[],y=[],N=new L.Map("map",A),R=new PruneClusterForLeaflet,I=L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a>'}),x=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYW9zY3MiLCJhIjoiY2owbDJpYWxwMDM3dTMzbzh6dDU2bnpzdyJ9._dh2UCWnAeNeG0ZL5sQ5gA",{id:"mapbox.dark",attribution:'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>'}),C=L.tileLayer("http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]});N.addLayer(C),N.addLayer(x),N.addLayer(I);var E,X=new L.Control.FullScreen;N.addControl(X);var j,O=new Rotas,P=void 0!==window.location.href.split("?")[1]?window.location.href.split("?")[1].split("="):null,S=$("#buscarPerfil .tab-content");function T(a){return a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/[ÀÁÂÃÄÅ]/g,"A")).replace(/[àáâãäå]/g,"a")).replace(/[ÉÈÊË]/g,"E")).replace(/[éèêë]/g,"e")).replace(/[ÍÌÎÏ]/g,"I")).replace(/[íìîï]/g,"i")).replace(/[ÓÒÔÕ]/g,"O")).replace(/[óòôõ]/g,"o")).replace(/[ÚÙÛÜ]/g,"U")).replace(/[úùûü]/g,"u")).replace(/[Ç]/g,"C")).replace(/[ç]/g,"c")}if(S.find(".btn.btn-primary").on("click",function(){var a=S.find(".tab-pane.fade.active.in"),e=a.attr("id"),o=a.find(".form-control").val();o=T(o.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_"),"organizacao"==e&&""!==o?(i="./resultado-consulta.html?"+e+"="+o+"&tipoBusca=0",location.href=i):""!==(o=$(".response").val())?(i="./resultado-consulta.html?"+e+"="+o,location.href=i):$("#errorLabel").removeClass("hide")}),$("#organizacao .form-control").autocomplete({minLength:3,source:function(a,e){v=T(a.term.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),$.ajax({url:O.AutocompleteOSCByName(v,10,0),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.tx_nome_osc,value:a.tx_nome_osc,id:a.id_osc}}))},error:function(a){e([])}})},select:function(a,e){i="./resultado-consulta.html?organizacao="+T(e.item.value.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_")+"&tipoBusca=1",location.href=i}}),$("#municipio .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:O.AutocompleteOSCByCounty(T(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),25),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,value:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,id:a.edmu_cd_municipio}}))},error:function(a){e([])}})},select:function(a,e){$(".response").val(e.item.id),i="./resultado-consulta.html?municipio="+e.item.id,location.href=i}}),$("#estado .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:O.AutocompleteOSCByState(T(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.eduf_nm_uf,value:a.eduf_nm_uf,id:a.eduf_cd_uf}}))},error:function(){e([])}})},select:function(a,e){$(".response").val(e.item.id),i="./resultado-consulta.html?estado="+e.item.id,location.href=i}}),$("#regiao .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:O.AutocompleteOSCByRegion(T(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.edre_nm_regiao,value:a.edre_nm_regiao,id:a.edre_cd_regiao}}))},error:function(){e([])}})},select:function(a,e){$(".response").val(e.item.id),i="./resultado-consulta.html?regiao="+e.item.id,location.href=i}}),$(".ui-autocomplete-input").keypress(function(a){if(13==a.which)return $(".btn-primary").click(),$(".ui-menu-item").hide(),!1}),null!==P){j=P[0];var q=P[1];if(q=(q=q.replace(/\./g,"")).split("&")[0],"organizacao"==j)urlRota=O.OSCByName(getParameter("organizacao"),0,getParameter("tipoBusca")),E=O.OSCByNameInMap(getParameter("organizacao"),getParameter("tipoBusca")),o=r=!1;else if("municipio"==j)urlRota=O.OSCByCounty(q,0),E=O.OSCByCountyInMap(q),o=!(r=!1),e=q,g="do município ",f="municipio.png";else if("estado"==j)urlRota=O.OSCByState(q,0),E=O.ClusterEstadoPorRegiao(q),o=!0,e=q,g="do estado ",f="estado.png";else if("regiao"==j)urlRota=O.OSCByRegion(q,0),E=O.ClusterRegiao(q),o=!0,e=q,g="da região ",f="regiao.png";else if("avancado"==j){if(M.avancado=window.localStorage.getItem("params_busca_avancada"),"{}"==M.avancado)j="todos",E=O.ClusterPais(),urlRota=O.AllOSC(0);else{$("#export button").removeAttr("disabled"),$("#export button").addClass("btn-success"),$("#export button").attr("title",""),urlRota=O.ConsultaAvancadaLista(0),E=O.ConsultaAvancadaMapa(),_=!(r=!1);var F=JSON.parse(M.avancado);if(F.dadosGerais&&(F.dadosGerais.cd_regiao&&(e=F.dadosGerais.cd_regiao,g="da região ",f="regiao.png",o=!0),F.dadosGerais.cd_uf&&(e=F.dadosGerais.cd_uf,g="do estado ",f="estado.png",o=!0),F.dadosGerais.cd_municipio&&(e=F.dadosGerais.cd_municipio,g="do município ",f="municipio.png",o=!0),F.Adicionais))for(var z in F.Adicionais){var B=z.split("cd_indice-")[1];y.push(B)}}!function(a,e){if("avancado"==e){var o=JSON.parse(a),i=o.dadosGerais,t="<b><u>Filtros utilizados:</u></b> ",r=!1;if(i){i.tx_razao_social_osc&&(t+="<b><i>Nome da OSC:</i></b> "+i.tx_razao_social_osc+", "),i.tx_nome_regiao&&(t+="<b><i>Região:</i></b> "+i.tx_nome_regiao+", "),i.tx_nome_fantasia_osc&&(t+="<b><i>Nome Fantasia:</i></b> "+i.tx_nome_fantasia_osc+", "),i.tx_nome_uf&&(t+="<b><i>Estado:</i></b> "+i.tx_nome_uf+", "),i.cd_identificador_osc&&(t+="<b><i>CNPJ:</i></b> "+i.cd_identificador_osc+", "),i.cd_situacao_imovel_osc&&$.ajax({url:O.SituacaoImovel_id(i.cd_situacao_imovel_osc),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Situação do Imóvel:</i></b> "+a[0].tx_nome_situacao_imovel+", ")}}),(i.anoFundacaoMIN||i.anoFundacaoMAX)&&(t+="<b><i>Ano de Fundação</i></b> ",i.anoFundacaoMIN&&(t+="<b><i>maior que:</i></b> "+i.anoFundacaoMIN+", "),i.anoFundacaoMAX&&(t+="<b><i>menor que:</i></b> "+i.anoFundacaoMAX+", ")),i.tx_nome_municipio&&(t+="<b><i>Município:</i></b> "+i.tx_nome_municipio+", ");var n="<b><i>Natureza Jurídica:</i></b> ";i.naturezaJuridica_associacaoPrivada&&(n+="Associação Privada, ",r=!0),i.naturezaJuridica_fundacaoPrivada&&(n+="Fundação Privada, ",r=!0),i.naturezaJuridica_organizacaoReligiosa&&(n+="Organização Religiosa, ",r=!0),i.naturezaJuridica_organizacaoSocial&&(n+="Organização Social, ",r=!0),i.naturezaJuridica_outra&&(n+="Não informado, ",r=!0),r&&(t+=n),i.cd_objetivo_osc&&$.ajax({url:O.Objetivos_ODS_id(i.cd_objetivo_osc),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(t+="<b><i>Objetivos do Desenvolvimento Sustentável - ODS:</i></b> "+a.tx_nome_objetivo_projeto+", ")}}),i.cd_meta_osc&&$.ajax({url:O.MetasById(i.cd_meta_osc),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(t+="<b><i>Metas Relacionadas ao ODS:</i></b> "+a.tx_nome_meta_projeto+", ")}})}var s=o.atividadeEconomica;s&&(t+="<b><i>Atividade Econômica (CNAE):</i></b> "+s.tx_atividade_economica+", ");var c=o.areasSubareasAtuacao;if(c){var d=[];$.ajax({url:O.AreaAtuacao(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: ")},success:function(a){for(var e in c){var o=parseInt(e.split("cd_area_atuacao-")[1]);null!=o&&$.each(a,function(a,e){o==e.cd_area_atuacao&&-1===d.indexOf(e.tx_nome_area_atuacao)&&d.push(e.tx_nome_area_atuacao)})}$.ajax({url:O.SubAreaAtuacao(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: ")},success:function(a){for(e in c){var o=parseInt(e.split("cd_subarea_atuacao-")[1]);null!=o&&$.each(a,function(a,e){o==e.cd_subarea_atuacao&&-1===d.indexOf(e.tx_nome_subarea_atuacao)&&d.push(e.tx_nome_subarea_atuacao)})}0<d.length&&(t+="<b><i>Área e Subárea de Atuação:</i></b> "+d.join(", ")+", ")}})}})}var l=o.titulacoesCertificacoes;if(l){var u=[];$.ajax({url:O.Busca_Certificado(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){var e={1:"titulacao_entidadeAmbientalista",2:"titulacao_cebasEducacao",3:"titulacao_cebasSaude",4:"titulacao_oscip",5:"titulacao_utilidadePublicaFederal",6:"titulacao_cebasAssistenciaSocial",7:"titulacao_utilidadePublicaEstadual",8:"titulacao_utilidadePublicaMunicipal",9:"titulacao_naoPossui"};for(var o in l)for(var i in e)if(e[i]==o)for(var r in a)a[r].cd_certificado==i&&-1===u.indexOf(a[r].tx_nome_certificado)&&u.push(a[r].tx_nome_certificado);0<u.length&&(t+="<b><i>Titulações e Certificações:</i></b> "+u.join(", ")+", ")}})}var m=o.relacoesTrabalhoGovernanca;m&&(m.tx_nome_dirigente&&(t+="<b><i>Nome do Dirigente:</i></b> "+m.tx_nome_dirigente+", "),m.tx_cargo_dirigente&&(t+="<b><i>Cargo do Dirigente:</i></b> "+m.tx_cargo_dirigente+", "),m.tx_nome_conselheiro&&(t+="<b><i>Nome do Membro do Conselho Fiscal:</i></b> "+m.tx_nome_conselheiro+", "),(m.totalTrabalhadoresMIN||m.totalTrabalhadoresMAX)&&(t+="<b><i>Total de Trabalhadores</i></b> ",m.totalTrabalhadoresMIN&&(t+="<b><i>maior que:</i></b> "+m.totalTrabalhadoresMIN+", "),m.totalTrabalhadoresMAX&&(t+="<b><i>menor que:</i></b> "+m.totalTrabalhadoresMAX+", ")),(m.totalEmpregadosMIN||m.totalEmpregadosMAX)&&(t+="<b><i>Total de Empregados</i></b> ",m.totalEmpregadosMIN&&(t+="<b><i>maior que:</i></b> "+m.totalEmpregadosMIN+", "),m.totalEmpregadosMAX&&(t+="<b><i>menor que:</i></b> "+m.totalEmpregadosMAX+", ")),(m.trabalhadoresDeficienciaMIN||m.trabalhadoresDeficienciaMAX)&&(t+="<b><i>Trabalhadores com Deficiência</i></b> ",m.trabalhadoresDeficienciaMIN&&(t+="<b><i>maior que:</i></b> "+m.trabalhadoresDeficienciaMIN+", "),m.trabalhadoresDeficienciaMAX&&(t+="<b><i>menor que:</i></b> "+m.trabalhadoresDeficienciaMAX+", ")),(m.trabalhadoresVoluntariosMIN||m.trabalhadoresVoluntariosMAX)&&(t+="<b><i>Trabalhadores voluntários</i></b> ",m.totalTrabalhadoresMIN&&(t+="<b><i>maior que:</i></b> "+m.trabalhadoresVoluntariosMIN+", "),m.totalTrabalhadoresMAX&&(t+="<b><i>menor que:</i></b> "+m.trabalhadoresVoluntariosMAX+", ")));var p=o.espacosParticipacaoSocial;p&&(p.cd_conselho&&$.ajax({url:O.Conselho_id(p.cd_conselho),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Nome do Conselho:</i></b> "+a[0].tx_nome_conselho+", ")}}),p.tx_nome_representante_conselho&&(t+="<b><i>Nome de representante conselho:</i></b> "+p.tx_nome_representante_conselho+", "),p.cd_tipo_participacao&&$.ajax({url:O.Titularidade_id(p.cd_tipo_participacao),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Titularidade:</i></b> "+a[0].tx_nome_tipo_participacao+", ")}}),p.dt_data_inicio_conselho&&(t+="<b><i>Data de Início de Vigência:</i></b> "+p.dt_data_inicio_conselho+", "),p.dt_data_fim_conselho&&(t+="<b><i>Data de Fim de Vigência:</i></b> "+p.dt_data_fim_conselho+", "),p.cd_conferencia&&$.ajax({url:O.Conferencia_id(p.cd_conferencia),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Nome da Conferência:</i></b> "+a[0].tx_nome_conferencia+", ")}}),p.cd_forma_participacao_conferencia&&$.ajax({url:O.FormaParticipacaoConferencia_id(p.cd_forma_participacao_conferencia),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Forma de Participação na Conferência:</i></b> "+a[0].tx_nome_forma_participacao_conferencia+", ")}}),(p.anoRealizacaoConferenciaMIN||p.anoRealizacaoConferenciaMAX)&&(t+="<b><i>Ano de Realização da Conferência</i></b> ",p.anoRealizacaoConferenciaMIN&&(t+="<b><i>maior que:</i></b> "+p.anoRealizacaoConferenciaMIN+", "),p.anoRealizacaoConferenciaMAX&&(t+="<b><i>menor que:</i></b> "+p.anoRealizacaoConferenciaMAX+", ")));var b=o.projetos;b&&(b.tx_nome_projeto&&(t+="<b><i>Nome do Projeto:</i></b> "+b.tx_nome_projeto+", "),b.cd_status_projeto&&$.ajax({url:O.SituacaoProjeto_id(b.cd_status_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Situação do projeto:</i></b> "+a[0].tx_nome_status_projeto+", ")}}),b.dt_data_inicio_projeto&&(t+="<b><i>Data de Início Projeto:</i></b> "+b.dt_data_inicio_projeto+", "),b.dt_data_fim_projeto&&(t+="<b><i>Data de Fim Projeto:</i></b> "+b.dt_data_fim_projeto+", "),b.cd_abrangencia_projeto&&$.ajax({url:O.AbrangenciaProjeto_id(b.cd_abrangencia_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Abrangência de atuação:</i></b> "+a[0].tx_nome_abrangencia_projeto+", ")}}),b.cd_zona_atuacao_projeto&&$.ajax({url:O.ZonaAtuacaoProjeto_id(b.cd_zona_atuacao_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Zona de Atuação:</i></b> "+a[0].tx_nome_zona_atuacao+", ")}}),b.cd_origem_fonte_recursos_projeto&&$.ajax({url:O.FontesRecursosProjeto_id(b.cd_origem_fonte_recursos_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){0<a.length&&(t+="<b><i>Fontes de Recursos:</i></b> "+a[0].tx_nome_origem_fonte_recursos_projeto+", ")}}),b.cd_objetivo_projeto&&$.ajax({url:O.Objetivos_ODS_id(b.cd_objetivo_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(t+="<b><i>Objetivos do Desenvolvimento Sustentável - ODS para Projeto:</i></b> "+a.tx_nome_objetivo_projeto+", ")}}),b.cd_meta_projeto&&$.ajax({url:O.MetasById(b.cd_meta_projeto),type:"GET",async:!1,dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){a&&(t+="<b><i>Metas Relacionadas ao ODS para projeto:</i></b> "+a.tx_nome_meta_projeto+", ")}}),b.tx_nome_financiador&&(t+="<b><i>Financiadores do Projeto:</i></b> "+b.tx_nome_financiador+", "),b.tx_nome_regiao_localizacao_projeto&&(t+="<b><i>Local de Execução:</i></b> "+b.tx_nome_regiao_localizacao_projeto+", "),b.tx_nome_publico_beneficiado&&(t+="<b><i>Público Beneficiado:</i></b> "+b.tx_nome_publico_beneficiado+", "),b.tx_nome_osc_parceira_projeto&&(t+="<b><i>OSC Parceiras:</i></b> "+b.tx_nome_osc_parceira_projeto+", "),(b.totalBeneficiariosMIN||b.totalBeneficiariosMAX)&&(t+="<b><i>Total de Beneficiários</i></b> ",b.totalBeneficiariosMIN&&(t+="<b><i>maior que:</i></b> "+b.totalBeneficiariosMIN+", "),b.totalBeneficiariosMAX&&(t+="<b><i>menor que:</i></b> "+b.totalBeneficiariosMAX+", ")),(b.valorTotalMIN||b.valorTotalMAX)&&(t+="<b><i>Valor Total Projeto</i></b> ",b.valorTotalMIN&&(t+="<b><i>maior que:</i></b> "+b.valorTotalMIN+", "),b.valorTotalMAX&&(t+="<b><i>menor que:</i></b> "+b.valorTotalMAX+", ")),(b.valorRecebidoMIN||b.valorRecebidoMAX)&&(t+="<b><i>Valor Recebido Projeto</i></b> ",b.valorRecebidoMIN&&(t+="<b><i>maior que:</i></b> "+b.valorRecebidoMIN+", "),b.valorRecebidoMAX&&(t+="<b><i>menor que:</i></b> "+b.valorRecebidoMAX+", ")));var _=o.fontesRecursos;_&&((_.anoFonteRecursoMIN||_.anoFonteRecursoMAX)&&(t+="<b><i>Fontes de recursos anuais da OSC Ano</i></b> ",_.anoFonteRecursoMIN&&(t+="<b><i>maior que:</i></b> "+_.anoFonteRecursoMIN+", "),_.anoFonteRecursoMAX&&(t+="<b><i>menor que:</i></b> "+_.anoFonteRecursoMAX+", ")),(_.rendimentosFinanceirosReservasContasCorrentesPropriasMIN||_.rendimentosFinanceirosReservasContasCorrentesPropriasMAX)&&(t+="<b><i>Rendimentos financeiros de reservas ou contas correntes próprias</i></b> ",_.rendimentosFinanceirosReservasContasCorrentesPropriasMIN&&(t+="<b><i>maior que:</i></b> "+_.rendimentosFinanceirosReservasContasCorrentesPropriasMIN+", "),_.rendimentosFinanceirosReservasContasCorrentesPropriasMAX&&(t+="<b><i>menor que:</i></b> "+_.rendimentosFinanceirosReservasContasCorrentesPropriasMAX+", ")),(_.rendimentosFundosPatrimoniaisMIN||_.rendimentosFundosPatrimoniaisMAX)&&(t+="<b><i>Rendimentos de fundos patrimoniais</i></b> ",_.rendimentosFundosPatrimoniaisMIN&&(t+="<b><i>maior que:</i></b> "+_.rendimentosFundosPatrimoniaisMIN+", "),_.rendimentosFundosPatrimoniaisMAX&&(t+="<b><i>menor que:</i></b> "+_.rendimentosFundosPatrimoniaisMAX+", ")),(_.mensalidadesContribuicoesAssociadosMIN||_.mensalidadesContribuicoesAssociadosMAX)&&(t+="<b><i>Mensalidades ou contribuições de associados</i></b> ",_.mensalidadesContribuicoesAssociadosMIN&&(t+="<b><i>maior que:</i></b> "+_.mensalidadesContribuicoesAssociadosMIN+", "),_.mensalidadesContribuicoesAssociadosMAX&&(t+="<b><i>menor que:</i></b> "+_.mensalidadesContribuicoesAssociadosMAX+", ")),(_.vendaBensDireitosMIN||_.vendaBensDireitosMAX)&&(t+="<b><i>Venda de bens e direitos</i></b> ",_.vendaBensDireitosMIN&&(t+="<b><i>maior que:</i></b> "+_.vendaBensDireitosMIN+", "),_.vendaBensDireitosMAX&&(t+="<b><i>menor que:</i></b> "+_.vendaBensDireitosMAX+", ")),(_.premiosRecebidosMIN||_.premiosRecebidosMAX)&&(t+="<b><i>Prêmios recebidos</i></b> ",_.premiosRecebidosMIN&&(t+="<b><i>maior que:</i></b> "+_.premiosRecebidosMIN+", "),_.premiosRecebidosMAX&&(t+="<b><i>menor que:</i></b> "+_.premiosRecebidosMAX+", ")),(_.vendaProdutosMIN||_.vendaProdutosMAX)&&(t+="<b><i>Venda de produtos</i></b> ",_.vendaProdutosMIN&&(t+="<b><i>maior que:</i></b> "+_.vendaProdutosMIN+", "),_.vendaProdutosMAX&&(t+="<b><i>menor que:</i></b> "+_.vendaProdutosMAX+", ")),(_.prestacaoServicosMIN||_.prestacaoServicosMAX)&&(t+="<b><i>Prestação de serviços</i></b> ",_.prestacaoServicosMIN&&(t+="<b><i>maior que:</i></b> "+_.prestacaoServicosMIN+", "),_.prestacaoServicosMAX&&(t+="<b><i>menor que:</i></b> "+_.prestacaoServicosMAX+", ")),(_.empresasPublicasSociedadesEconomiaMistaMIN||_.empresasPublicasSociedadesEconomiaMistaMAX)&&(t+="<b><i>Empresas públicas ou sociedades de economia mista</i></b> ",_.empresasPublicasSociedadesEconomiaMistaMIN&&(t+="<b><i>maior que:</i></b> "+_.empresasPublicasSociedadesEconomiaMistaMIN+", "),_.empresasPublicasSociedadesEconomiaMistaMAX&&(t+="<b><i>menor que:</i></b> "+_.empresasPublicasSociedadesEconomiaMistaMAX+", ")),(_.acordoOrganismosMultilateraisMIN||_.acordoOrganismosMultilateraisMAX)&&(t+="<b><i>Acordo com organismos multilaterais</i></b> ",_.acordoOrganismosMultilateraisMIN&&(t+="<b><i>maior que:</i></b> "+_.acordoOrganismosMultilateraisMIN+", "),_.acordoOrganismosMultilateraisMAX&&(t+="<b><i>menor que:</i></b> "+_.acordoOrganismosMultilateraisMAX+", ")),(_.parceriaGovernoFederalMIN||_.parceriaGovernoFederalMAX)&&(t+="<b><i>Parceria com o governo federal</i></b> ",_.parceriaGovernoFederalMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaGovernoFederalMIN+", "),_.parceriaGovernoFederalMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaGovernoFederalMAX+", ")),(_.parceriaGovernoEstadualMIN||_.parceriaGovernoEstadualMAX)&&(t+="<b><i>Parceria com o governo estadual</i></b> ",_.parceriaGovernoEstadualMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaGovernoEstadualMIN+", "),_.parceriaGovernoEstadualMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaGovernoEstadualMAX+", ")),(_.parceriaGovernoMunicipalMIN||_.parceriaGovernoMunicipalMAX)&&(t+="<b><i>Parceria com o governo municipal</i></b> ",_.parceriaGovernoMunicipalMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaGovernoMunicipalMIN+", "),_.parceriaGovernoMunicipalMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaGovernoMunicipalMAX+", ")),(_.acordoGovernosEstrangeirosMIN||_.acordoGovernosEstrangeirosMAX)&&(t+="<b><i>Acordo com governos estrangeiros</i></b> ",_.acordoGovernosEstrangeirosMIN&&(t+="<b><i>maior que:</i></b> "+_.acordoGovernosEstrangeirosMIN+", "),_.acordoGovernosEstrangeirosMAX&&(t+="<b><i>menor que:</i></b> "+_.acordoGovernosEstrangeirosMAX+", ")),(_.parceriaOscBrasileirasMIN||_.parceriaOscBrasileirasMAX)&&(t+="<b><i>Parceria com OSCs brasileiras</i></b> ",_.parceriaOscBrasileirasMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaOscBrasileirasMIN+", "),_.parceriaOscBrasileirasMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaOscBrasileirasMAX+", ")),(_.parceriaOscEstrangeirasMIN||_.parceriaOscEstrangeirasMAX)&&(t+="<b><i>Parceria com OSCs estrangeiras</i></b> ",_.parceriaOscEstrangeirasMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaOscEstrangeirasMIN+", "),_.parceriaOscEstrangeirasMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaOscEstrangeirasMAX+", ")),(_.parceriaOrganizacoesReligiosasBrasileirasMIN||_.parceriaOrganizacoesReligiosasBrasileirasMAX)&&(t+="<b><i>Parceria com organizações religiosas brasileiras</i></b> ",_.parceriaOrganizacoesReligiosasBrasileirasMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaOrganizacoesReligiosasBrasileirasMIN+", "),_.parceriaOrganizacoesReligiosasBrasileirasMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaOrganizacoesReligiosasBrasileirasMAX+", ")),(_.parceriaOrganizacoesReligiosasEstrangeirasMIN||_.parceriaOrganizacoesReligiosasEstrangeirasMAX)&&(t+="<b><i>Parceria com organizações religiosas estrangeiras</i></b> ",_.parceriaOrganizacoesReligiosasEstrangeirasMIN&&(t+="<b><i>maior que:</i></b> "+_.parceriaOrganizacoesReligiosasEstrangeirasMIN+", "),_.parceriaOrganizacoesReligiosasEstrangeirasMAX&&(t+="<b><i>menor que:</i></b> "+_.parceriaOrganizacoesReligiosasEstrangeirasMAX+", ")),(_.empresasPrivadasBrasileirasMIN||_.empresasPrivadasBrasileirasMAX)&&(t+="<b><i>Empresas privadas brasileiras</i></b> ",_.empresasPrivadasBrasileirasMIN&&(t+="<b><i>maior que:</i></b> "+_.empresasPrivadasBrasileirasMIN+", "),_.empresasPrivadasBrasileirasMAX&&(t+="<b><i>menor que:</i></b> "+_.empresasPrivadasBrasileirasMAX+", ")),(_.EmpresasEstrangeirasMIN||_.EmpresasEstrangeirasMAX)&&(t+="<b><i>Empresas estrangeiras</i></b> ",_.EmpresasEstrangeirasMIN&&(t+="<b><i>maior que:</i></b> "+_.EmpresasEstrangeirasMIN+", "),_.EmpresasEstrangeirasMAX&&(t+="<b><i>menor que:</i></b> "+_.EmpresasEstrangeirasMAX+", ")),(_.doacoesPessoaJuridicaMIN||_.doacoesPessoaJuridicaMAX)&&(t+="<b><i>Doações de pessoa jurídica</i></b> ",_.doacoesPessoaJuridicaMIN&&(t+="<b><i>maior que:</i></b> "+_.doacoesPessoaJuridicaMIN+", "),_.doacoesPessoaJuridicaMAX&&(t+="<b><i>menor que:</i></b> "+_.doacoesPessoaJuridicaMAX+", ")),(_.doacoesPessoaFisicaMIN||_.doacoesPessoaFisicaMAX)&&(t+="<b><i>Doações de pessoa física</i></b> ",_.doacoesPessoaFisicaMIN&&(t+="<b><i>maior que:</i></b> "+_.doacoesPessoaFisicaMIN+", "),_.doacoesPessoaFisicaMAX&&(t+="<b><i>menor que:</i></b> "+_.doacoesPessoaFisicaMAX+", ")),(_.doacoesRecebidasFormaProdutosServicosComNFMIN||_.doacoesRecebidasFormaProdutosServicosComNFMAX)&&(t+="<b><i>Doações recebidas na forma de produtos e serviços (com NF)</i></b> ",_.doacoesRecebidasFormaProdutosServicosComNFMIN&&(t+="<b><i>maior que:</i></b> "+_.doacoesRecebidasFormaProdutosServicosComNFMIN+", "),_.doacoesRecebidasFormaProdutosServicosComNFMAX&&(t+="<b><i>menor que:</i></b> "+_.doacoesRecebidasFormaProdutosServicosComNFMAX+", ")),(_.voluntariadoMIN||_.voluntariadoMAX)&&(t+="<b><i>Voluntariado</i></b> ",_.voluntariadoMIN&&(t+="<b><i>maior que:</i></b> "+_.voluntariadoMIN+", "),_.voluntariadoMAX&&(t+="<b><i>menor que:</i></b> "+_.voluntariadoMAX+", ")),(_.isencoesMIN||_.isencoesMAX)&&(t+="<b><i>Isenções:</i></b> ",_.isencoesMIN&&(t+="<b><i>maior que:</i></b> "+_.isencoesMIN+", "),_.isencoesMAX&&(t+="<b><i>menor que:</i></b> "+_.isencoesMAX+", ")),(_.imunidadesMIN||_.imunidadesMAX)&&(t+="<b><i>Imunidades</i></b> ",_.imunidadesMIN&&(t+="<b><i>maior que:</i></b> "+_.imunidadesMIN+", "),_.imunidadesMAX&&(t+="<b><i>menor que:</i></b> "+_.imunidadesMAX+", ")),(_.bensRecebidosDireitoUsoMIN||_.bensRecebidosDireitoUsoMAX)&&(t+="<b><i>Bens recebidos em direito de uso</i></b> ",_.bensRecebidosDireitoUsoMIN&&(t+="<b><i>maior que:</i></b> "+_.bensRecebidosDireitoUsoMIN+", "),_.bensRecebidosDireitoUsoMAX&&(t+="<b><i>menor que:</i></b> "+_.bensRecebidosDireitoUsoMAX+", ")),(_.doacoesRecebidasFormaProdutosServicosSemNFMIN||_.doacoesRecebidasFormaProdutosServicosSemNFMAX)&&(t+="<b><i>Doações recebidas na forma de produtos e serviços (sem NF)</i></b> ",_.doacoesRecebidasFormaProdutosServicosSemNFMIN&&(t+="<b><i>maior que:</i></b> "+_.doacoesRecebidasFormaProdutosServicosSemNFMIN+", "),_.doacoesRecebidasFormaProdutosServicosSemNFMAX&&(t+="<b><i>menor que:</i></b> "+_.valorMAX+", ")));var g=o.IDH;g&&g.IDH_Municipal&&(t+="<b><i>Índice de Desenvolvimento Humano:</i></b> IDH Municipal - Faixa: ",g.baixo&&(t+="baixa, "),g.medio&&(t+="médio, "),g.alto&&(t+="alto, ")),$("#filtros p").html(t)}}(M.avancado,j)}else console.log("ERRO de URL!")}else j="todos",E=O.ClusterPais(),urlRota=O.AllOSC(0);if(o){var D="Análise "+g;$("#analisePerfil").text(D),$("#analisePerfil").attr("href","analise-perfil.html?localidade="+e);var G='<img src="img/'+f+'" alt="" height=40>';$("#analisePerfil").append(G)}function w(a,e){var o;$("#loading").removeClass("hide"),$("#resultadoconsulta_formato_dados").hide(),o=e?(type_http="POST",M):(type_http="GET",null),$.ajax({url:a,type:type_http,dataType:"json",data:o,error:function(a){console.log("Erro no ajax: "+a)},success:function(a){if("Nenhuma Organização encontrada!"!==a){var e=a.length,o=new Array(e),i=0,r="Dado não informado.";for(var t in a)if("0"!=t){o[i]=new Array(6);var n=null!==a[t][4]?a[t][4]:"img/camera.jpg";o[i][0]='<img class="img-circle media-object" src='+n+' height="64" width="64">',o[i][1]=null!==a[t][0]?a[t][0]:r,o[i][2]=null!==a[t][1]?a[t][1]:r,o[i][3]=null!==a[t][2]?a[t][2]:r,o[i][4]=null!==a[t][3]?a[t][3]:r,o[i][5]='<button type="button" onclick="location.href=\'visualizar-osc.html#'+t+'\';" class="btn btn-info"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Detalhar</button>',i++}if(void 0!==o[0]){var s=$("#resultadoconsulta_formato_dados").DataTable({responsive:!0,processing:!0,deferLoading:1e3,deferRender:!0,searching:!1,data:o,dom:"Bfrtip",bPaginate:!1,bSort:!0,aaSorting:[[1,"asc"]],columns:[{title:"",width:50},{title:"Nome da OSC",width:200},{title:"CNPJ"},{title:"Natureza Jurídica"},{title:"Endereço"},{title:"Detalhar"}],aoColumnDefs:[{bSortable:!1,aTargets:[0]},{bSortable:!1,aTargets:[5]},{bSortable:!1,aTargets:[4]}],autoWidth:!0});s.destroy(),s.draw(),$("#resultadoconsulta_formato_dados").show(),$("#loading").addClass("hide")}else $("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Nenhuma OSC encontrada!"),"avancado"!==j&&"municipio"!==j?$("#modalConteudo").text('Sua pesquisa "'+decodeURIComponent(q)+'" não retornou nenhuma OSC.'):$("#modalConteudo").text("Sua pesquisa não retornou nenhuma OSC."),$("#modalMensagem").modal("show")}else $("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Nenhuma OSC encontrada!"),"avancado"!==j&&"municipio"!==j?$("#modalConteudo").text('Sua pesquisa "'+decodeURIComponent(q)+'" não retornou nenhuma OSC.'):$("#modalConteudo").text("Sua pesquisa não retornou nenhuma OSC."),$("#modalMensagem").modal("show")}}),$("#resultadoconsulta_formato_dados").on("draw.dt",function(){verificarContraste()})}function J(a,e,o){if(""!==e&&null!==e||null!==o&&""!==o){var i=new PruneCluster.Marker(e,o);return i.data.ID=a,R.PrepareLeafletMarker=function(a,e){a.on("click",function(){!function(r,t){t.bindPopup('<img id="loading" src="img/loading.gif" style="padding-top: 10px; padding-left: 10px;"/>').openPopup(),$.ajax({url:O.OSCPopUpByID(r),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(void 0!==a){var e=(null!==a.tx_endereco?a.tx_endereco:"")+" - "+(null!==a.tx_bairro?a.tx_bairro:""),o="Dado não informado.",i='<div class="mapa_organizacao clearfix"><span id="spantitle" class="magneticTooltip"><button id="title" class="btn-link"  onclick=location.href="visualizar-osc.html#'+r+'"><h4>'+(null!==a.tx_nome_osc?a.tx_nome_osc:o)+'</h4></button></span><div class="coluna1"><strong></strong><strong>Endereço: </strong>'+e+"<br><strong>Atividade Econômica: </strong>"+(null!==a.tx_nome_atividade_economica?a.tx_nome_atividade_economica:o)+"<br><strong>Natureza Jurídica: </strong>"+(null!==a.tx_nome_natureza_juridica?a.tx_nome_natureza_juridica:o)+'<br><br><div align="center"><button type = button class="btn btn-info" onclick=location.href="visualizar-osc.html#'+r+'"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Detalhar</button></div></div></div>';t.bindPopup(i).openPopup()}}})}(e.ID,a)})},R.RegisterMarker(i),R}return null}function k(a,e,o,i,r){var t;if(""!==o&&null!==o||null!==i&&""!==i)return"regiao"==r||"todos"==r?t=L.marker([o,i],{icon:a}).on("click",ea):"estado"==r&&(t=L.marker([o,i],{icon:a}).on("click",ia)),t}function U(a){for(var e in a)if("0"!=e){var o=J(e,a[e][0],a[e][1]);null!==o&&N.addLayer(o)}$("#loadingMapModal").hide(),R.ProcessView()}var V,H=L.control();function Z(a){var e=a.target;e.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||e.bringToFront(),"GO"==e.feature.properties.Name&&e.bringToBack(),H.update(e.feature.properties)}function W(a){t.resetStyle(a.target),H.update()}function Y(a){var e=a.target;N.fitBounds(e.getBounds())}function Q(e,o){var i;function r(a){var e=a.target;if(N.fitBounds(e.getBounds()),function(a){$("#loadingMapModal").show(),$.ajax({url:O.OSCByStateInMap(a),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(w(urlRota,_),void 0!==a.length){for(var e=0,o=0;o<a.length;o++)e+=a[o].nr_quantidade_osc_regiao;oa(e)}else oa(Object.keys(a).length-1);void 0!==a&&U(a)}})}(e.feature.properties.id),null==l[e.feature.properties.Regiao]){var o=d[e.feature.properties.id];null!=o&&N.removeLayer(o)}else!function(t){var n=t.feature.properties.Regiao;$("#loadingMapModal").show(),$.ajax({url:O.ClusterEstadoPorRegiao(n),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(w(urlRota,_),void 0!==a.length){for(var e=0,o=0;o<a.length;o++)e+=a[o].nr_quantidade_osc_regiao;oa(e)}else oa(Object.keys(a).length-1);if(void 0!==a){aa(a,"estado");var i=l[n];N.removeLayer(i),delete l[n];var r=d[t.feature.properties.id];N.removeLayer(r)}}})}(e);e.off(),e.on({mouseover:Z,mouseout:W,click:Y})}$.each(statesData.features,function(a){i=statesData.features[a].properties.Name,statesData.features[a].properties.density=e[i],statesData.features[a].properties.id=o[i]}),N.addLayer(m),N.addLayer(p),H.onAdd=function(a){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},H.update=function(a){this._div.innerHTML="<h4>OSCs por Estado</h4>"+(a?"<b>"+a.Name+"</b><br />"+a.density+" OSCs.":"Passe o mouse sobre um estado")},H.addTo(N);var a=L.control({position:"bottomright"});a.onAdd=function(a){var e=L.DomUtil.create("div","info legend"),o=[0,1e3,15e3,3e4,45e3,6e4];e.innerHTML+="<h5>Escala de OSCs por estado</h5>";for(var i=0;i<o.length;i++)e.innerHTML+='<i style="background:'+K(o[i]+1)+'"></i> '+parseInt(o[i]+1)+(o[i+1]?"&ndash;"+o[i+1]+"<br>":"+");return e},a.addTo(N),t=L.geoJson(statesData,{style:function(a){return{fillColor:K(a.properties.density),weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.6}},onEachFeature:function(a,e){e.on({mouseover:Z,mouseout:W,click:r}),m.addLayer(e),p.addLayer(e),c[e.feature.properties.id]=e,s[e.feature.properties.id]=e}}).addTo(N)}function K(a){return 6e4<a?"#800026":45e3<a?"#E31A1C":3e4<a?"#FC4E2A":15e3<a?"#FEB24C":1e3<a?"#FED976":"#FFEDA0"}function aa(a,e){var o;for(var i in"regiao"==e||"todos"==e?o="labelClassRegiao":"estado"==e&&(o="labelClassEstado"),a){var r=L.divIcon({id:a[i].id_regiao,className:o,html:"<p>"+a[i].nr_quantidade_osc_regiao+"</p>"});n[a[i].id_regiao]=a[i].nr_quantidade_osc_regiao;var t=k(r,a[i].id_regiao,a[i].geo_lat_centroid_regiao,a[i].geo_lng_centroid_regiao,e);u.addLayer(t),"estado"==e?d[a[i].id_regiao]=t:"regiao"!=e&&"todos"!=e||(l[a[i].id_regiao]=t)}b||(u.addTo(N),b=!0),$("#loadingMapModal").hide()}function ea(i){var r=i.target.options.icon.options.id;$("#loadingMapModal").show(),$.ajax({url:O.ClusterEstadoPorRegiao(r),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(w(urlRota,_),void 0!==a.length){for(var e=0,o=0;o<a.length;o++)e+=a[o].nr_quantidade_osc_regiao;oa(e)}else oa(Object.keys(a).length-1);void 0!==a&&(N.setView([i.target._latlng.lat,i.target._latlng.lng],5),N.removeLayer(i.target),delete l[r],aa(a,"estado"))}})}function oa(a){$(".pagination").pagination({items:a,itemsOnPage:10,hrefTextPrefix:"#",prevText:"Anterior",nextText:"Próximo",onPageClick:function(a){!function(a){null===a&&(a=0);var e=10*parseInt(a)-10;"avancado"==j?(urlRota=O.ConsultaAvancadaLista(e),_=!0):"municipio"==j?urlRota=O.OSCByCounty(q,e):"estado"==j?urlRota=O.OSCByState(q,e):"regiao"==j?urlRota=O.OSCByRegion(q,e):"todos"==j?urlRota=O.AllOSC(e):"organizacao"==j&&(urlRota=O.OSCByName(getParameter("organizacao"),e,getParameter("tipoBusca")));w(urlRota,_)}(a)}})}function ia(r){var t=r.target.options.icon.options.id;$("#loadingMapModal").show(),$.ajax({url:O.OSCByStateInMap(t),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(w(urlRota,_),void 0!==a.length){for(var e=0,o=0;o<a.length;o++)e+=a[o].nr_quantidade_osc_regiao;oa(e)}else oa(Object.keys(a).length-1);if(void 0!==a){N.setView([r.target._latlng.lat,r.target._latlng.lng],6),N.removeLayer(r.target);var i=c[t];i.off(),i.on({mouseover:Z,mouseout:W,click:Y}),U(a)}}})}$("#loadingMapModal").show(),V=_?(type_http="POST",M):(type_http="GET",null),$.ajax({url:E,type:type_http,dataType:"json",data:V,error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(""!==a&&void 0!==a&&"Nenhuma Organização encontrada!"!==a){w(urlRota,_);var e=0;if(r){if(void 0!==a.length)for(var o=0;o<a.length;o++)e+=a[o].nr_quantidade_osc_regiao;oa(e),$("#legenda p").append(e),aa(a,j)}else if(oa(e=Object.keys(a).length-1),$("#legenda p").append(e),U(a),_){for(var i in a)"0"!=i&&h.push(i);$("#export button").click(function(){var a={};a.lista_osc=h,a.variaveis_adicionais=y,$.ajax({url:O.ExportarDadosConsulta(),type:"POST",dataType:"json",async:!1,data:a,error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){var e,o=function(a){var o,i,r,t,n,e;return null!=(e=a.data||null)&&e.length?(t=a.columnDelimiter||";",n=a.lineDelimiter||"\n",r=Object.keys(e[0]),o="",o+=r.join(t),o+=n,e.forEach(function(e){i=0,r.forEach(function(a){0<i&&(o+=t),o+=e[a],i++}),o+=n}),o):null}({data:a});o.match(/^data:text\/csv/i)||(o="data:text/csv;charset=utf-8,"+o),e=encodeURI(o);var i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=e,i.download="export.csv",i.click()}})})}}else $("#modalMensagem").modal({backdrop:"static",keyboard:!1}),$("#modalTitle").text("Nenhuma OSC encontrada!"),"avancado"!==j&&"municipio"!==j?$("#modalConteudo").text('Sua pesquisa "'+decodeURIComponent(q)+'" não retornou nenhuma OSC.'):$("#modalConteudo").text("Sua pesquisa não retornou nenhuma OSC."),$("#modalMensagem").modal("show")}}),$.ajax({url:O.ClusterEstado(),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a)},success:function(a){if(void 0!==a){var e={},o={};for(var i in a)e[a[i].tx_sigla_regiao]=a[i].nr_quantidade_osc_regiao,o[a[i].tx_sigla_regiao]=a[i].id_regiao;N.addControl(new L.Control.Layers({"Satélite":C,Contraste:x,Mapa:I},{"Mapa de calor":m},{collapsed:!1})),Q(e,o)}}}),N.on("zoomend",function(a){18==N.getZoom()&&(N.removeLayer(m),N.removeLayer(p))})});