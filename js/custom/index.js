"use strict";require(["jquery-ui"],function(a){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,e){$(this).css(a),$("<div>").addClass("arrow").addClass(e.vertical).addClass(e.horizontal).appendTo(this)}}}),jQuery(document).ready(function(a){a(".scroll").click(function(e){e.preventDefault(),a("html,body").animate({scrollTop:a(this.hash).offset().top},800)})})}),require(["rotas","jquery-ui","nv.d3.lib","graficoParaTabela"],function(a){var e=new Rotas;$.ajax({url:e.GraficosSlug("home"),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if(null!=a)for(var o=0;o<a.length;o++)$.ajax({url:e.RecuperarGrafico(a[o]),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if(null!=a){var e="",t="Elaboração própria.",r=o+1;e+='<div class="container"><div class="row"><div class="col-md-12"><hr>',e+='<h2 class="text-center">'+a.titulo+"</h2>",e+='</div></div><div class="row"><div class="col-md-12"><hr></div></div>',e+='<div class="row"><div class="col-md-12"><div class="chart-container" id="grafico-'+r+'"><svg></svg></div>',null!=a.fontes&&(t=a.fontes.join(", ").replace(/'/gi,""),t+="."),e+="<h5>Fonte: "+t+"</h5>",null!=a.legenda&&(e+="<h5>"+a.legenda+"</h5>"),e+='<h5><a id="tabela-'+r+'" class="btn-item" data-toggle="modal" title="Mostrar os dados em Tabela.">Visualize os dados em tabela.</a></h5>',e+='</div></div><a href="#header" name="header" class="scroll topo">Voltar para o topo</a></div>',$("#itemGrafico").append(e),escolherGrafico(r,a)}}})}})}),require(["rotas","bootstrap","jquery-ui"],function(a){function e(a){return a=a.replace(/[ÀÁÂÃÄÅ]/g,"A"),a=a.replace(/[àáâãäå]/g,"a"),a=a.replace(/[ÉÈÊË]/g,"E"),a=a.replace(/[éèêë]/g,"e"),a=a.replace(/[ÍÌÎÏ]/g,"I"),a=a.replace(/[íìîï]/g,"i"),a=a.replace(/[ÓÒÔÕ]/g,"O"),a=a.replace(/[óòôõ]/g,"o"),a=a.replace(/[ÚÙÛÜ]/g,"U"),a=a.replace(/[úùûü]/g,"u"),a=a.replace(/[Ç]/g,"C"),a=a.replace(/[ç]/g,"c")}var o=new Rotas;$.ajax({url:o.ModuloWebdoors(),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a),$(".loading").addClass("hide")},success:function(a){var e="";if(a.length>0)for(var o in a){var t="",r="";0==o?(t+='<li data-target="#carousel-topo" data-slide-to="'+o+'" class="active"></li>',r+='<div class="item active">'):(t+='<li data-target="#carousel-topo" data-slide-to="'+o+'"></li>',r+='<div class="item">'),e=null!=a[o].tx_imagem_webdoor&&""!=a[o].tx_imagem_webdoor?"/cms/imagens/webdoors/"+a[o].tx_imagem_webdoor:"img/item_cms.png",r+='<a class="btn-item" href="'+a[o].tx_link_webdoor+'">',r+='<img src="'+e+'"  onerror="this.src=\'img/item_cms.png\';" alt="" title="Link para '+a[o].tx_titulo_webdoor+'">',r+='<div class="carousel-caption"><h4 class="legenda">'+a[o].tx_legenda_webdoor+"</h4></div>",null!=a[o].tx_descricao_webdoor&&""!=a[o].tx_descricao_webdoor&&(r+='<div class="carousel-caption carousel-descricao"><div">'+a[o].tx_descricao_webdoor+"</div></div>"),r+="</a></div>",$(".carousel-indicators").append(t),$(".carousel-inner").append(r)}$(".loading").addClass("hide")}});var t="",r=$(".tab-content");r.find(".btn.btn-primary").on("click",function(){var a=r.find(".tab-pane.fade.active.in"),o=a.attr("id"),t=a.find(".form-control").val();t=e(t.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_");var c;"organizacao"==o&&""!==t?(c="./resultado-consulta.html?"+o+"="+t+"&tipoBusca=0",location.href=c):""!==(t=$(".response").val())?(c="./resultado-consulta.html?"+o+"="+t,location.href=c):$("#errorLabel").removeClass("hide")}),$("#organizacao .form-control").autocomplete({minLength:3,source:function(a,r){t=e(a.term.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),$.ajax({url:o.AutocompleteOSCByName(t,10,0),type:"GET",dataType:"json",success:function(a){r($.map(a,function(a){return{label:a.tx_nome_osc,value:a.tx_nome_osc,id:a.id_osc}}))},error:function(a){r([])}})},select:function(a,o){var t="./resultado-consulta.html?organizacao="+e(o.item.value.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_")+"&tipoBusca=1";location.href=t}}),$("#municipio .form-control").autocomplete({minLength:3,source:function(a,t){$.ajax({url:o.AutocompleteOSCByCounty(e(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),25),type:"GET",dataType:"json",success:function(a){t($.map(a,function(a){return{label:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,value:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,id:a.edmu_cd_municipio}}))},error:function(a){t([])}})},select:function(a,e){$(".response").val(e.item.id);var o="./resultado-consulta.html?municipio="+e.item.id;location.href=o}}),$("#estado .form-control").autocomplete({minLength:3,source:function(a,t){$.ajax({url:o.AutocompleteOSCByState(e(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){t($.map(a,function(a){return{label:a.eduf_nm_uf,value:a.eduf_nm_uf,id:a.eduf_cd_uf}}))},error:function(){t([])}})},select:function(a,e){$(".response").val(e.item.id);var o="./resultado-consulta.html?estado="+e.item.id;location.href=o}}),$("#regiao .form-control").autocomplete({minLength:3,source:function(a,t){$.ajax({url:o.AutocompleteOSCByRegion(e(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){t($.map(a,function(a){return{label:a.edre_nm_regiao,value:a.edre_nm_regiao,id:a.edre_cd_regiao}}))},error:function(){t([])}})},select:function(a,e){$(".response").val(e.item.id);var o="./resultado-consulta.html?regiao="+e.item.id;location.href=o}}),$(document).ready(function(){function a(){var a=window.localStorage.getItem("cd_localidade");""!=a&&null!=a&&void 0!=a||$("#modalLocalidade").modal("show"),c()}function e(){var a=0,e=0,o="",t=$(".MultiCarousel").width(),r=$("body").width();$(".MultiCarousel-inner").each(function(){e+=1;var c=$(this).find(".item").length,l=$(this).parent().attr("data-items");o=l.split(","),$(this).parent().attr("id","MultiCarousel"+e),r>=1200?(a=o[3],i=30+t/a):r>=992?(a=o[2],i=t/a):r>=768?(a=o[2],i=t/a):r>=400?(a=o[1],i=t/a):(a=o[0],i=t/a),$(this).css({transform:"translateX(0px)",width:i*c}),$(this).find(".item").each(function(){$(this).outerWidth(i)}),$(".leftLst").addClass("over"),$(".rightLst").removeClass("over")})}function t(a,e){var o="#"+$(e).parent().attr("id");!function(a,e,o){var t=".MultiCarousel-inner",r="",c=$(e+" "+t).css("transform").match(/-?[\d\.]+/g),l=Math.abs(c[4]);if(0==a)r=parseInt(l)-parseInt(i*o),$(e+" .rightLst").removeClass("over"),r<=i/2&&(r=0,$(e+" .leftLst").addClass("over"));else if(1==a){var n=$(e).find(t).width()-$(e).width();r=parseInt(l)+parseInt(i*o),$(e+" .leftLst").removeClass("over"),r>=n-i/2&&(r=n,$(e+" .rightLst").addClass("over"))}$(e+" "+t).css("transform","translateX("+-r+"px)")}(a,o,$(o).attr("data-slide"))}function r(a,e){$.ajax({url:function(a){var e=window.localStorage.getItem("cd_localidade"),t=window.localStorage.getItem("cd_latitude"),r=window.localStorage.getItem("cd_longitude");return void 0!=t&&null!=t&&""!=t&&void 0!=r&&null!=r&&""!=r?o.RecuperarOscPorGeolocalizacaoAreaAtuacao(a,t,r):void 0!=e&&null!=e&&""!=e?o.RecuperarOscPorLocalidadeAreaAtuacao(a,e):o.RecuperarOscPorAreaAtuacao(a)}(a),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){$("#loading_top_5").hide();var o='<center><h5 style="padding-top: 0px;"><b>'+e+"</b></h5></center>";o+='<div class="table-responsive">',o+='<table class="table table-hover">';var t="<tbody>";if(null!=a&&0!==a.length){for(var r=0;r<a.length&&r<5;r++){t+="<tr>",t+='<th scope="row">'+(r+1)+"</th>",t+='  <td><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[r].id_osc+"';\" >"+a[r].tx_nome_osc+"</a></td>",t+='  <th scope="row"><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[r].id_osc+'\';"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></th>',t+="</tr>"}t+="</tbody>"}else t+="<tr>",t+='<th scope="row"><center>Nenhuma OSC encontrada.</center></th>',t+="</tr>";o+=t+"</table></div>",$("#top_5_area_atuacao").html(o)}})}function c(){$.ajax({url:o.AreaAtuacao(),type:"GET",async:!0,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){var o="";if(null!=a&&void 0!==a.length){for(var c,i="",l=0;l<a.length;l++)1!=a[l].cd_area_atuacao&&10!=a[l].cd_area_atuacao&&(2==a[l].cd_area_atuacao?(i+='<div class="item active">',c=a[l].cd_area_atuacao,o=a[l].tx_nome_area_atuacao):i+='<div class="item">',i+='<div class="col-xs-12"><a class="btn-item" data-btn='+a[l].cd_area_atuacao+" <center>",i+='<img class="imgAreaAtuacao" src="img/area_atuacao_'+a[l].cd_area_atuacao+'.png" >',i+="<h5><b>"+a[l].tx_nome_area_atuacao+"</b></h5></center></a></div></div>");$(".MultiCarousel-inner").append(i),$(".leftLst, .rightLst").click(function(){$(this).hasClass("leftLst")?t(0,this):t(1,this)}),e(),$(window).resize(function(){e()}),$(".MultiCarousel .item a").on("click",function(){c=$(this).attr("data-btn"),o=$(this).text(),r(c,o)}),r(c,o)}}})}var i="";navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,r=e.coords.longitude;console.log(e),void 0!=t&&null!=t&&""!=t&&void 0!=r&&null!=r&&""!=r?(window.localStorage.setItem("cd_latitude",t.toLocaleString("PT")),window.localStorage.setItem("cd_longitude",r.toLocaleString("PT")),$.ajax({url:o.RecuperarMunicipio(t,r),type:"GET",async:!0,dataType:"json",error:function(e){a()},success:function(a){null!=a&&0!==a.length&&(window.localStorage.setItem("cd_localidade",a[0].cd_localidade),window.localStorage.setItem("nome_localidade",a[0].tx_nome_localidade),$("#btn-localidade").text(a[0].tx_nome_localidade)),c()}})):a()},function(e){a()}):a(),$(".ui-autocomplete-input").keypress(function(a){if(13==a.which)return $(".btn-primary").click(),$(".ui-menu-item").hide(),!1}),$.ajax({url:o.RecuperarOscAtualizacao(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if($("#loading_top_10").hide(),null!=a&&void 0!==a.length){var e='<div class="table-responsive">';e+='<table class="table table-hover">';for(var o="<tbody>",t=0;t<a.length&&t<10;t++){o+="<tr>",o+='<th scope="row">'+(t+1)+"</th>",o+='  <td><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[t].id_osc+"';\" >"+a[t].tx_nome_osc+"</a></td>",o+='  <th scope="row"><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[t].id_osc+'\';"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></th>',o+="</tr>"}e+=(o+="</tbody>")+"</table></div>",$("#top_10_atualizacao").html(e)}}})})});