"use strict";require(["jquery-ui"],function(a){$(document).tooltip({position:{my:"center bottom-20",at:"center top",using:function(a,e){$(this).css(a),$("<div>").addClass("arrow").addClass(e.vertical).addClass(e.horizontal).appendTo(this)}}}),jQuery(document).ready(function(e){e(".scroll").click(function(a){a.preventDefault(),e("html,body").animate({scrollTop:e(this.hash).offset().top},800)})})}),require(["rotas","jquery-ui","nv.d3.lib","graficoParaTabela"],function(a){var e=new Rotas;$.ajax({url:e.GraficosSlug("home"),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if(null!=a)for(var r=0;r<a.length;r++)$.ajax({url:e.RecuperarGrafico(a[r]),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if(null!=a){var e="",o="Elaboração própria.",t=r+1;e+='<div class="container"><div class="row"><div class="col-md-12"><hr>',e+='<h2 class="text-center">'+a.titulo+"</h2>",e+='</div></div><div class="row"><div class="col-md-12"><hr></div></div>',e+='<div class="row"><div class="col-md-12"><div class="chart-container" id="grafico-'+t+'"><svg></svg></div>',null!=a.fontes&&(o=a.fontes.join(", ").replace(/'/gi,""),o+="."),e+="<h5>Fonte: "+o+"</h5>",null!=a.legenda&&(e+="<h5>"+a.legenda+"</h5>"),e+='<h5><a id="tabela-'+t+'" class="btn-item" data-toggle="modal" title="Mostrar os dados em Tabela.">Visualize os dados em tabela.</a></h5>',e+='</div></div><a href="#header" name="header" class="scroll topo">Voltar para o topo</a></div>',$("#itemGrafico").append(e),escolherGrafico(t,a)}}})}})}),require(["rotas","bootstrap","jquery-ui"],function(a){var i=new Rotas;$.ajax({url:i.ModuloWebdoors(),type:"GET",dataType:"json",error:function(a){console.log("ERRO no AJAX :"+a),$(".loading").addClass("hide")},success:function(a){var e="";if(0<a.length)for(var o in a){var t="",r="";0==o?(t+='<li data-target="#carousel-topo" data-slide-to="'+o+'" class="active"></li>',r+='<div class="item active">'):(t+='<li data-target="#carousel-topo" data-slide-to="'+o+'"></li>',r+='<div class="item">'),e=null!=a[o].tx_imagem_webdoor&&""!=a[o].tx_imagem_webdoor?"/cms/imagens/webdoors/"+a[o].tx_imagem_webdoor:"img/item_cms.png",r+='<a class="btn-item" href="'+a[o].tx_link_webdoor+'">',r+='<img src="'+e+'"  onerror="this.src=\'img/item_cms.png\';" alt="" title="Link para '+a[o].tx_titulo_webdoor+'">',r+='<div class="carousel-caption"><h4 class="legenda">'+a[o].tx_legenda_webdoor+"</h4></div>",null!=a[o].tx_descricao_webdoor&&""!=a[o].tx_descricao_webdoor&&(r+='<div class="carousel-caption carousel-descricao"><div">'+a[o].tx_descricao_webdoor+"</div></div>"),r+="</a></div>",$(".carousel-indicators").append(t),$(".carousel-inner").append(r)}$(".loading").addClass("hide")}});var o="",r=$(".tab-content");function c(a){return a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/[ÀÁÂÃÄÅ]/g,"A")).replace(/[àáâãäå]/g,"a")).replace(/[ÉÈÊË]/g,"E")).replace(/[éèêë]/g,"e")).replace(/[ÍÌÎÏ]/g,"I")).replace(/[íìîï]/g,"i")).replace(/[ÓÒÔÕ]/g,"O")).replace(/[óòôõ]/g,"o")).replace(/[ÚÙÛÜ]/g,"U")).replace(/[úùûü]/g,"u")).replace(/[Ç]/g,"C")).replace(/[ç]/g,"c")}r.find(".btn.btn-primary").on("click",function(){var a,e=r.find(".tab-pane.fade.active.in"),o=e.attr("id"),t=e.find(".form-control").val();t=c(t.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_"),"organizacao"==o&&""!==t?(a="./resultado-consulta.html?"+o+"="+t+"&tipoBusca=0",location.href=a):""!==(t=$(".response").val())?(a="./resultado-consulta.html?"+o+"="+t,location.href=a):$("#errorLabel").removeClass("hide")}),$("#organizacao .form-control").autocomplete({minLength:3,source:function(a,e){o=c(a.term.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),$.ajax({url:i.AutocompleteOSCByName(o,10,0),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.tx_nome_osc,value:a.tx_nome_osc,id:a.id_osc}}))},error:function(a){e([])}})},select:function(a,e){var o="./resultado-consulta.html?organizacao="+c(e.item.value.trim()).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,",").replace(/\+{2,}/g,"_")+"&tipoBusca=1";location.href=o}}),$("#municipio .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:i.AutocompleteOSCByCounty(c(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),25),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,value:a.edmu_nm_municipio+" - "+a.eduf_sg_uf,id:a.edmu_cd_municipio}}))},error:function(a){e([])}})},select:function(a,e){$(".response").val(e.item.id);var o="./resultado-consulta.html?municipio="+e.item.id;location.href=o}}),$("#estado .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:i.AutocompleteOSCByState(c(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.eduf_nm_uf,value:a.eduf_nm_uf,id:a.eduf_cd_uf}}))},error:function(){e([])}})},select:function(a,e){$(".response").val(e.item.id);var o="./resultado-consulta.html?estado="+e.item.id;location.href=o}}),$("#regiao .form-control").autocomplete({minLength:3,source:function(a,e){$.ajax({url:i.AutocompleteOSCByRegion(c(a.term).replace(/ /g,"_").replace(/[\/|\\|\||:|#|@|$|&|!|?|(|)|\[|\]]/g,"").replace(/\./g,","),10),type:"GET",dataType:"json",success:function(a){e($.map(a,function(a){return{label:a.edre_nm_regiao,value:a.edre_nm_regiao,id:a.edre_cd_regiao}}))},error:function(){e([])}})},select:function(a,e){$(".response").val(e.item.id);var o="./resultado-consulta.html?regiao="+e.item.id;location.href=o}}),$(document).ready(function(){var d="";function t(){var a=window.localStorage.getItem("cd_localidade");""!=a&&null!=a&&null!=a||$("#modalLocalidade").modal("show"),r()}function c(){var o=0,t=0,r="",c=$(".MultiCarousel").width(),l=$("body").width();$(".MultiCarousel-inner").each(function(){t+=1;var a=$(this).find(".item").length,e=$(this).parent().attr("data-items");r=e.split(","),$(this).parent().attr("id","MultiCarousel"+t),d=1200<=l?(o=r[3],30+c/o):(o=992<=l?r[2]:768<=l?r[2]:400<=l?r[1]:r[0],c/o),$(this).css({transform:"translateX(0px)",width:d*a}),$(this).find(".item").each(function(){$(this).outerWidth(d)}),$(".leftLst").addClass("over"),$(".rightLst").removeClass("over")})}function l(a,e){var o="#"+$(e).parent().attr("id");!function(a,e,o){var t=".MultiCarousel-inner",r=".leftLst",c=".rightLst",l="",n=$(e+" "+t).css("transform").match(/-?[\d\.]+/g),i=Math.abs(n[4]);if(0==a)l=parseInt(i)-parseInt(d*o),$(e+" "+c).removeClass("over"),l<=d/2&&(l=0,$(e+" "+r).addClass("over"));else if(1==a){var s=$(e).find(t).width()-$(e).width();l=parseInt(i)+parseInt(d*o),$(e+" "+r).removeClass("over"),s-d/2<=l&&(l=s,$(e+" "+c).addClass("over"))}$(e+" "+t).css("transform","translateX("+-l+"px)")}(a,o,$(o).attr("data-slide"))}function n(a,r){$.ajax({url:function(a){var e=window.localStorage.getItem("cd_localidade"),o=window.localStorage.getItem("cd_latitude"),t=window.localStorage.getItem("cd_longitude");return null!=o&&null!=o&&""!=o&&null!=t&&null!=t&&""!=t?i.RecuperarOscPorGeolocalizacaoAreaAtuacao(a,o,t):null!=e&&null!=e&&""!=e?i.RecuperarOscPorLocalidadeAreaAtuacao(a,e):i.RecuperarOscPorAreaAtuacao(a)}(a),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){$("#loading_top_5").hide();var e='<center><h5 style="padding-top: 0px;"><b>'+r+"</b></h5></center>";e+='<div class="table-responsive">',e+='<table class="table table-hover">';var o="<tbody>";if(null!=a&&0!==a.length){for(var t=0;t<a.length&&t<5;t++){o+="<tr>",o+='<th scope="row">'+(t+1)+"</th>",o+='  <td><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[t].id_osc+"';\" >"+a[t].tx_nome_osc+"</a></td>",o+='  <th scope="row"><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[t].id_osc+'\';"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></th>',o+="</tr>"}o+="</tbody>"}else o+="<tr>",o+='<th scope="row"><center>Nenhuma OSC encontrada.</center></th>',o+="</tr>";e+=o+"</table></div>",$("#top_5_area_atuacao").html(e)}})}function r(){$.ajax({url:i.AreaAtuacao(),type:"GET",async:!0,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){var e="";if(null!=a&&void 0!==a.length){for(var o,t="",r=0;r<a.length;r++)1!=a[r].cd_area_atuacao&&10!=a[r].cd_area_atuacao&&(2==a[r].cd_area_atuacao?(t+='<div class="item active">',o=a[r].cd_area_atuacao,e=a[r].tx_nome_area_atuacao):t+='<div class="item">',t+='<div class="col-xs-12"><a class="btn-item" data-btn='+a[r].cd_area_atuacao+" <center>",t+='<img class="imgAreaAtuacao" src="img/area_atuacao_'+a[r].cd_area_atuacao+'.png" >',t+="<h5><b>"+a[r].tx_nome_area_atuacao+"</b></h5></center></a></div></div>");$(".MultiCarousel-inner").append(t),$(".leftLst, .rightLst").click(function(){l($(this).hasClass("leftLst")?0:1,this)}),c(),$(window).resize(function(){c()}),$(".MultiCarousel .item a").on("click",function(){o=$(this).attr("data-btn"),e=$(this).text(),n(o,e)}),n(o,e)}}})}navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var e=a.coords.latitude,o=a.coords.longitude;console.log(a),null!=e&&null!=e&&""!=e&&null!=o&&null!=o&&""!=o?(window.localStorage.setItem("cd_latitude",e.toLocaleString("PT")),window.localStorage.setItem("cd_longitude",o.toLocaleString("PT")),$.ajax({url:i.RecuperarMunicipio(e,o),type:"GET",async:!0,dataType:"json",error:function(a){t()},success:function(a){null!=a&&0!==a.length&&(window.localStorage.setItem("cd_localidade",a[0].cd_localidade),window.localStorage.setItem("nome_localidade",a[0].tx_nome_localidade),$("#btn-localidade").text(a[0].tx_nome_localidade)),r()}})):t()},function(a){t()}):t(),$(".ui-autocomplete-input").keypress(function(a){if(13==a.which)return $(".btn-primary").click(),$(".ui-menu-item").hide(),!1}),$.ajax({url:i.RecuperarOscAtualizacao(),type:"GET",async:!1,dataType:"json",error:function(a){console.log("Erro no ajax: "),console.log(a)},success:function(a){if($("#loading_top_10").hide(),null!=a&&void 0!==a.length){var e='<div class="table-responsive">';e+='<table class="table table-hover">';for(var o="<tbody>",t=0;t<a.length&&t<10;t++){o+="<tr>",o+='<th scope="row">'+(t+1)+"</th>",o+='  <td><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[t].id_osc+"';\" >"+a[t].tx_nome_osc+"</a></td>",o+='  <th scope="row"><a class="btn-item" onclick="location.href=\'visualizar-osc.html#'+a[t].id_osc+'\';"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></th>',o+="</tr>"}e+=(o+="</tbody>")+"</table></div>",$("#top_10_atualizacao").html(e)}}})})});