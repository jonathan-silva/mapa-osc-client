"use strict";var _createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Util=function(){function k(){_classCallCheck(this,k)}return _createClass(k,[{key:"FormItens",value:function(e,t,a,r,n,o,i,s,l,c,d){return{id:e,label:t,content:a,fonte:r,placeholder:n,type:o,options:i,pretext:s,custom_class:l,hide:c,default:d}}},{key:"carregaAjax",value:function(e,t,a){var r=null;return $.ajax({url:e,async:!1,type:t,dataType:"json",data:a,success:function(e){r=e},error:function(e){r=e}}),r}},{key:"validateObject",value:function(e,t){return null===e?t:void 0===e?t:0===Object.keys(e).length&&e.constructor===Object?t:e}},{key:"contains",value:function(e,t){return"string"==typeof t&&0<=t.indexOf(e)}},{key:"showUnauthorizedUser",value:function(e){401===e.status&&($("#unauthorized").dialog("open"),console.log(e))}},{key:"AgrupadorDeInputs",value:function(e,t,a,r,n,o,i,s){return{id:e,containerClass:t,header:a,inputs:r,options:o,buttons:n,custom_class:i,infoTitle:s}}},{key:"abrirModalAjuda",value:function(e,t){var a=t[e];$("#modalTitulo").html(""),$("#modalTitulo").html(e),$("#corpoModal").html(""),$("#corpoModal").html(a),$("#modalAjuda").modal("show"),verificarContraste()}},{key:"InputProjeto",value:function(e,t,a,r,n,o,i,s,l,c,d,u,p){return{id:e,content:t,type:a,options:r,removable:n,buttons:o,buttonsInLine:i,placeholder:s,title:l,fonte:c,cd:d,cc:u,infoTitle:p}}},{key:"getTipoProjeto",value:function(e,t){return{id:e,dados:t}}},{key:"addOutro",value:function(e){var n;n=e,$("."+n).each(function(t,e){var a=$(this).children().find("select").first(),r=a.find("option:last").val();a.change(function(){var e=$(this).parent().parent().parent();$(this).val()==r?(e.find("#outro_"+n).remove(),e.append('<div id="outro_'+n+'" style="padding-top: 10px;"><label class = "control-label">Novo Item:</label><div class="input-box"><input type="text" class="form-control " placeholder="Insira o novo item aqui" id="outro_'+n+"-"+t+'" value=""><span class="fonte-de-dados dado-organizacao" title="Informação preenchida pela Organização"><img class="imgDadoEditavel" src="img/dado_representante.png"></span></div></div>')):e.find("#outro_"+n)&&e.find("#outro_"+n).remove()})})}},{key:"addItem",value:function(e){!function g(y){function b(e){return!!e}$("#"+y+" button").on("click",function(){if($(this).hasClass("btn-primary")){var e=$(this).parent(),t=e.find("input[type=text]"),a=e.find("select"),r=new Array;if(t.parent().removeClass("has-error"),a.parent().removeClass("has-error"),$(".alert-danger").remove(),t.each(function(e){""!==$(this).val().trim()?r[e]=!0:(r[e]=!1,$(this).parent().addClass("has-error").after('<span class = "alert-danger">É necessário que os campos estejam preenchidos.</span>'))}),a.each(function(e){"-1"!==$(this).val()?r[e]=!0:(r[e]=!1,$(this).parent().addClass("has-error").after('<span class = "alert-danger">É necessário que os campos estejam preenchidos.</span>'))}),r.every(b)){t.parent().removeClass("has-error"),a.parent().removeClass("has-error"),t.after().find("span").remove(),a.after().find("span").remove(),e.find("button").text("Remover").attr("class","btn-danger btn");var n,o=$("#"+y).children();e.clone().appendTo(o),"conselhos"!=y&&"conferencias"!=y&&"outros_part"!=y||e.parent().parent().children().first().children().last().remove(),e.parent().children().last().find("button").text("Adicionar").attr("class","btn-primary btn").click(g(y)),e.parent().children().last().find("input[type=text]").val(""),e.parent().children().last().find("select").val("-1");for(var i=e.parent().children().last().find(".date"),s=e.parent().children().last().find(".ano"),l=e.parent().children().last().prev().find(".date"),c=e.parent().children().last().prev().find(".ano"),d=0;d<i.length;d++){var u=i[d],p=l[d],f=((n=$(p).attr("id")).substr(0,n.indexOf("-")),n.substr(n.indexOf("-")+1)),h=$(u).attr("id").substr(0,n.indexOf("-")),v=Number(f),m=h;v--,$(u).removeClass("hasDatepicker"),$(u).attr("id",m+"-"+v),$(u).datepicker({dateFormat:"dd-mm-yy",changeYear:!0})}if(this.addOutros=new k,"conselhos"==y&&this.addOutros.addOutro("conselho"),"conferencias"==y)u=s[0],p=c,(n=$(p).attr("id")).substr(0,n.indexOf("-")),f=n.substr(n.indexOf("-")+1),h=$(u).attr("id").substr(0,n.indexOf("-")),v=Number(f),m=h,v--,$(u).removeClass("hasDatepicker"),$(u).attr("id",m+"-"+v),$(u).datepicker({changeYear:!0,showButtonPanel:!0,dateFormat:"yy",yearRange:"1950:2050",onClose:function(e,t){var a=$("#ui-datepicker-div .ui-datepicker-year :selected").val();$(this).datepicker("setDate",new Date(a,1))}}),$(u).focus(function(){$(".ui-datepicker-calendar").hide(),$(".ui-datepicker-month").hide(),$(".ui-datepicker-prev").hide(),$(".ui-datepicker-next").hide()}),this.addOutros.addOutro("conferencia");$(".date").datepicker({dateFormat:"dd-mm-yy"}),e.parent().children().last().find("#outro_conselho")&&e.parent().children().last().find("#outro_conselho").remove(),e.parent().children().last().find("#outro_conferencia")&&e.parent().children().last().find("#outro_conferencia").remove()}}else $(this).parent().remove()})}(e)}},{key:"verificarPermissao",value:function(e){var t=window.localStorage.getItem("Osc");if("undefined"!=t){var a=JSON.parse(t);if("undefined"!=a&&null!==a)for(var r=0;r<a.length;r++)if(a[r]==e)return!0}return!1}},{key:"replaceSpecialChars",value:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[ÀÁÂÃÄÅ]/g,"A")).replace(/[àáâãäå]/g,"a")).replace(/[ÉÈÊË]/g,"E")).replace(/[éèêë]/g,"e")).replace(/[ÍÌÎÏ]/g,"I")).replace(/[íìîï]/g,"i")).replace(/[ÓÒÔÕ]/g,"O")).replace(/[óòôõ]/g,"o")).replace(/[ÚÙÛÜ]/g,"U")).replace(/[úùûü]/g,"u")).replace(/[Ç]/g,"C")).replace(/[ç]/g,"c")}}]),k}();